const observerOptions={threshold:.15,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("revealed"),observer.unobserve(e.target))})},observerOptions);document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".reveal-up, .reveal-left, .reveal-right").forEach(e=>observer.observe(e))});const parallaxBg=document.querySelector(".hero-parallax-bg");let ticking=!1;function updateParallax(){const e=window.pageYOffset;parallaxBg&&(parallaxBg.style.transform=`translateY(${.5*e}px)`),ticking=!1}window.addEventListener("scroll",()=>{ticking||(window.requestAnimationFrame(updateParallax),ticking=!0)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=document.querySelector(".nav").offsetHeight,o=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"})}})});const sections=document.querySelectorAll("section[id]"),navLinks=document.querySelectorAll(".nav-link");function highlightNavigation(){const e=window.pageYOffset;sections.forEach(t=>{const o=t.offsetHeight,n=t.offsetTop-150,r=t.getAttribute("id");e>n&&e<=n+o&&navLinks.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${r}`&&e.classList.add("active")})})}window.addEventListener("scroll",highlightNavigation);const contactForm=document.getElementById("contactForm");if(contactForm){const e={name:document.getElementById("name"),email:document.getElementById("email"),subject:document.getElementById("subject"),message:document.getElementById("message")},t={name:document.getElementById("name-error"),email:document.getElementById("email-error"),subject:document.getElementById("subject-error"),message:document.getElementById("message-error")},o={name:e=>e.trim()?e.trim().length<2?"El nombre debe tener al menos 2 caracteres":"":"El nombre es requerido",email:e=>{if(!e.trim())return"El email es requerido";return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Email inválido"},subject:e=>e.trim()?e.trim().length<3?"El asunto debe tener al menos 3 caracteres":"":"El asunto es requerido",message:e=>e.trim()?e.trim().length<10?"El mensaje debe tener al menos 10 caracteres":"":"El mensaje es requerido"};function validateField(n){const r=e[n],s=t[n],a=o[n](r.value);return a?(s.textContent=a,r.setAttribute("aria-invalid","true"),r.style.borderColor="#ff6b6b",!1):(s.textContent="",r.removeAttribute("aria-invalid"),r.style.borderColor="",!0)}Object.keys(e).forEach(o=>{const n=e[o];n.addEventListener("blur",()=>{validateField(o)}),n.addEventListener("input",()=>{t[o].textContent&&validateField(o)})}),contactForm.addEventListener("submit",o=>{o.preventDefault();let n=!0;if(Object.keys(e).forEach(e=>{validateField(e)||(n=!1)}),n)contactForm.submit();else{const o=Object.keys(e).find(e=>t[e].textContent);o&&e[o].focus()}})}let mouseX=0,mouseY=0,cursorX=0,cursorY=0;function animateCursor(){cursorX+=.1*(mouseX-cursorX),cursorY+=.1*(mouseY-cursorY),requestAnimationFrame(animateCursor)}document.addEventListener("mousemove",e=>{mouseX=e.clientX,mouseY=e.clientY}),animateCursor();const projectCards=document.querySelectorAll(".project-card");projectCards.forEach(e=>{e.addEventListener("mouseenter",function(){this.style.setProperty("--mouse-x","0px"),this.style.setProperty("--mouse-y","0px")}),e.addEventListener("mousemove",function(e){const t=this.getBoundingClientRect(),o=e.clientX-t.left,n=e.clientY-t.top;this.style.setProperty("--mouse-x",`${o}px`),this.style.setProperty("--mouse-y",`${n}px`)})});const buttons=document.querySelectorAll(".btn");buttons.forEach(e=>{e.addEventListener("click",function(e){const t=document.createElement("span"),o=this.getBoundingClientRect(),n=Math.max(o.width,o.height),r=e.clientX-o.left-n/2,s=e.clientY-o.top-n/2;t.style.width=t.style.height=`${n}px`,t.style.left=`${r}px`,t.style.top=`${s}px`,t.classList.add("ripple"),this.appendChild(t),setTimeout(()=>{t.remove()},600)})});const nav=document.querySelector(".nav");let lastScrollY=window.pageYOffset;window.addEventListener("scroll",()=>{const e=window.pageYOffset;e>100?(nav.style.background="rgba(10, 10, 10, 0.98)",nav.style.boxShadow="0 2px 20px rgba(0, 0, 0, 0.5)"):(nav.style.background="rgba(10, 10, 10, 0.95)",nav.style.boxShadow="none"),lastScrollY=e});const images=document.querySelectorAll('img[loading="lazy"]');if("IntersectionObserver"in window){const n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target;t.classList.add("loaded"),n.unobserve(t)}})});images.forEach(e=>n.observe(e))}const prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)");function animateValue(e,t,o,n){let r=null;const s=a=>{r||(r=a);const i=Math.min((a-r)/n,1);e.textContent=Math.floor(i*(o-t)+t),i<1&&window.requestAnimationFrame(s)};window.requestAnimationFrame(s)}function typeWriter(e,t,o=100){let n=0;e.textContent="",function r(){n<t.length&&(e.textContent+=t.charAt(n),n++,setTimeout(r,o))}()}function debounce(e,t){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...n)},t)}}prefersReducedMotion.matches&&(document.body.style.setProperty("--transition-fast","0s"),document.body.style.setProperty("--transition-normal","0s"),document.body.style.setProperty("--transition-slow","0s"));const debouncedHighlight=debounce(highlightNavigation,100);function trapFocus(e){const t=e.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),o=t[0],n=t[t.length-1];e.addEventListener("keydown",t=>{"Tab"===t.key&&(t.shiftKey?document.activeElement===o&&(n.focus(),t.preventDefault()):document.activeElement===n&&(o.focus(),t.preventDefault())),"Escape"===t.key&&(e.style.display="none")})}window.addEventListener("scroll",debouncedHighlight),console.log("%c¡Hola Developer! 👋","font-size: 20px; font-weight: bold; color: #ffd700;"),console.log("%cEste portafolio fue construido con ❤️ usando:","font-size: 14px; color: #a0a0a0;"),console.log("%c• HTML5 + Handlebars\n• CSS3 (Variables nativas)\n• Vanilla JavaScript\n• Node.js + Express\n• Nodemailer","font-size: 12px; color: #e0e0e0;"),console.log("%c\n¿Interesado en colaborar? ¡Contáctame! 🚀","font-size: 14px; font-weight: bold; color: #ffd700;"),document.addEventListener("DOMContentLoaded",()=>{console.log("✅ Portfolio cargado correctamente"),setTimeout(()=>{document.body.classList.add("loaded")},100)});